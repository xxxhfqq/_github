{"ast":null,"code":"import { ref } from \"vue\";\nimport axios from \"axios\";\n\n// 当前激活的选项卡 ('info' 或 'list')\n\nexport default {\n  __name: 'AdminView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const activeTab = ref(\"info\");\n\n    // 用户信息\n    const userInfo = ref(null);\n\n    // 分页用户列表\n    const userList = ref([]);\n    const pagination = ref({\n      pageNum: 1,\n      pageSize: 10,\n      total: 0\n    });\n    const filters = ref({\n      keyword: \"\",\n      createTimeBegin: \"\",\n      createTimeEnd: \"\"\n    });\n\n    // 切换选项卡\n    const switchTab = tab => {\n      activeTab.value = tab;\n    };\n\n    // 获取当前用户信息\n    const fetchUserInfo = async () => {\n      try {\n        const response = await axios.get(\"http://59.110.93.150:8080/admin/user/info/get\");\n        if (response.data.code === 200) {\n          userInfo.value = response.data.data;\n        } else {\n          alert(response.data.message || \"获取用户信息失败\");\n        }\n      } catch (error) {\n        console.error(\"获取用户信息失败:\", error);\n        alert(\"请求失败，请稍后重试\");\n      }\n    };\n\n    // 分页查询用户列表\n    const fetchUserList = async () => {\n      try {\n        const {\n          pageNum,\n          pageSize\n        } = pagination.value;\n        const {\n          keyword,\n          createTimeBegin,\n          createTimeEnd\n        } = filters.value;\n        const response = await axios.get(`http://59.110.93.150:8080/admin/user/findByPage/${pageNum}/${pageSize}`, {\n          params: {\n            keyword,\n            createTimeBegin,\n            createTimeEnd\n          }\n        });\n        if (response.data.code === 200) {\n          userList.value = response.data.data.list;\n          pagination.value.total = response.data.data.total;\n        } else {\n          alert(response.data.message || \"查询用户列表失败\");\n        }\n      } catch (error) {\n        console.error(\"查询用户列表失败:\", error);\n        alert(\"请求失败，请稍后重试\");\n      }\n    };\n\n    // 改变页码\n    const changePage = newPage => {\n      pagination.value.pageNum = newPage;\n      fetchUserList();\n    };\n    const __returned__ = {\n      activeTab,\n      userInfo,\n      userList,\n      pagination,\n      filters,\n      switchTab,\n      fetchUserInfo,\n      fetchUserList,\n      changePage,\n      ref,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","activeTab","userInfo","userList","pagination","pageNum","pageSize","total","filters","keyword","createTimeBegin","createTimeEnd","switchTab","tab","value","fetchUserInfo","response","get","data","code","alert","message","error","console","fetchUserList","params","list","changePage","newPage"],"sources":["D:/_xhf/java/html_css_javascript/vue/vuerouter/vue-school-travel-app/src/views/AdminView.vue"],"sourcesContent":["<template>\r\n  <div class=\"user-management\">\r\n    <div class=\"menu\">\r\n      <button\r\n        :class=\"{ active: activeTab === 'info' }\"\r\n        @click=\"switchTab('info')\"\r\n      >\r\n        查询用户信息\r\n      </button>\r\n      <button\r\n        :class=\"{ active: activeTab === 'list' }\"\r\n        @click=\"switchTab('list')\"\r\n      >\r\n        分页查询用户列表\r\n      </button>\r\n    </div>\r\n\r\n    <div v-if=\"activeTab === 'info'\" class=\"tab-content\">\r\n      <h2>用户信息</h2>\r\n      <button @click=\"fetchUserInfo\">获取用户信息</button>\r\n      <div v-if=\"userInfo\">\r\n        <p><strong>ID:</strong> {{ userInfo.id }}</p>\r\n        <p><strong>用户名:</strong> {{ userInfo.userName }}</p>\r\n        <p><strong>邮箱:</strong> {{ userInfo.email }}</p>\r\n        <p><strong>电话:</strong> {{ userInfo.phone }}</p>\r\n        <p><strong>创建时间:</strong> {{ userInfo.createTime }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"activeTab === 'list'\" class=\"tab-content\">\r\n      <h2>分页用户列表</h2>\r\n      <div class=\"filters\">\r\n        <input v-model=\"filters.keyword\" type=\"text\" placeholder=\"关键字\" />\r\n        <input v-model=\"filters.createTimeBegin\" type=\"date\" />\r\n        <input v-model=\"filters.createTimeEnd\" type=\"date\" />\r\n        <button @click=\"fetchUserList\">查询</button>\r\n      </div>\r\n      <div v-if=\"userList.length\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>用户名</th>\r\n              <th>邮箱</th>\r\n              <th>电话</th>\r\n              <th>创建时间</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"user in userList\" :key=\"user.id\">\r\n              <td>{{ user.id }}</td>\r\n              <td>{{ user.userName }}</td>\r\n              <td>{{ user.email }}</td>\r\n              <td>{{ user.phone }}</td>\r\n              <td>{{ user.createTime }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <p>总记录数: {{ pagination.total }}</p>\r\n        <div class=\"pagination\">\r\n          <button\r\n            :disabled=\"pagination.pageNum === 1\"\r\n            @click=\"changePage(pagination.pageNum - 1)\"\r\n          >\r\n            上一页\r\n          </button>\r\n          <button\r\n            :disabled=\"\r\n              pagination.pageNum * pagination.pageSize >= pagination.total\r\n            \"\r\n            @click=\"changePage(pagination.pageNum + 1)\"\r\n          >\r\n            下一页\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport axios from \"axios\";\r\n\r\n// 当前激活的选项卡 ('info' 或 'list')\r\nconst activeTab = ref(\"info\");\r\n\r\n// 用户信息\r\nconst userInfo = ref(null);\r\n\r\n// 分页用户列表\r\nconst userList = ref([]);\r\nconst pagination = ref({\r\n  pageNum: 1,\r\n  pageSize: 10,\r\n  total: 0,\r\n});\r\nconst filters = ref({\r\n  keyword: \"\",\r\n  createTimeBegin: \"\",\r\n  createTimeEnd: \"\",\r\n});\r\n\r\n// 切换选项卡\r\nconst switchTab = (tab) => {\r\n  activeTab.value = tab;\r\n};\r\n\r\n// 获取当前用户信息\r\nconst fetchUserInfo = async () => {\r\n  try {\r\n    const response = await axios.get(\r\n      \"http://59.110.93.150:8080/admin/user/info/get\"\r\n    );\r\n    if (response.data.code === 200) {\r\n      userInfo.value = response.data.data;\r\n    } else {\r\n      alert(response.data.message || \"获取用户信息失败\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取用户信息失败:\", error);\r\n    alert(\"请求失败，请稍后重试\");\r\n  }\r\n};\r\n\r\n// 分页查询用户列表\r\nconst fetchUserList = async () => {\r\n  try {\r\n    const { pageNum, pageSize } = pagination.value;\r\n    const { keyword, createTimeBegin, createTimeEnd } = filters.value;\r\n    const response = await axios.get(\r\n      `http://59.110.93.150:8080/admin/user/findByPage/${pageNum}/${pageSize}`,\r\n      {\r\n        params: { keyword, createTimeBegin, createTimeEnd },\r\n      }\r\n    );\r\n    if (response.data.code === 200) {\r\n      userList.value = response.data.data.list;\r\n      pagination.value.total = response.data.data.total;\r\n    } else {\r\n      alert(response.data.message || \"查询用户列表失败\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"查询用户列表失败:\", error);\r\n    alert(\"请求失败，请稍后重试\");\r\n  }\r\n};\r\n\r\n// 改变页码\r\nconst changePage = (newPage) => {\r\n  pagination.value.pageNum = newPage;\r\n  fetchUserList();\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-management {\r\n  padding: 20px;\r\n}\r\n.menu {\r\n  margin-bottom: 20px;\r\n}\r\n.menu button {\r\n  padding: 10px 20px;\r\n  margin-right: 10px;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.menu button.active {\r\n  background-color: #2e7d32;\r\n}\r\n.menu button:hover {\r\n  background-color: #45a049;\r\n}\r\n.tab-content {\r\n  margin-top: 20px;\r\n}\r\n.filters {\r\n  margin-bottom: 20px;\r\n}\r\n.filters input {\r\n  margin-right: 10px;\r\n  padding: 5px;\r\n}\r\n.pagination {\r\n  margin-top: 10px;\r\n}\r\n.pagination button {\r\n  margin-right: 10px;\r\n  padding: 5px 10px;\r\n}\r\ntable {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n}\r\ntable th,\r\ntable td {\r\n  border: 1px solid #ddd;\r\n  padding: 8px;\r\n  text-align: left;\r\n}\r\ntable th {\r\n  background-color: #f4f4f4;\r\n}\r\n</style>\r\n"],"mappings":"AAiFA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;;AAEzB;;;;;;;;IACA,MAAMC,SAAS,GAAGF,GAAG,CAAC,MAAM,CAAC;;IAE7B;IACA,MAAMG,QAAQ,GAAGH,GAAG,CAAC,IAAI,CAAC;;IAE1B;IACA,MAAMI,QAAQ,GAAGJ,GAAG,CAAC,EAAE,CAAC;IACxB,MAAMK,UAAU,GAAGL,GAAG,CAAC;MACrBM,OAAO,EAAE,CAAC;MACVC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE;IACT,CAAC,CAAC;IACF,MAAMC,OAAO,GAAGT,GAAG,CAAC;MAClBU,OAAO,EAAE,EAAE;MACXC,eAAe,EAAE,EAAE;MACnBC,aAAa,EAAE;IACjB,CAAC,CAAC;;IAEF;IACA,MAAMC,SAAS,GAAIC,GAAG,IAAK;MACzBZ,SAAS,CAACa,KAAK,GAAGD,GAAG;IACvB,CAAC;;IAED;IACA,MAAME,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAC9B,+CACF,CAAC;QACD,IAAID,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE;UAC9BjB,QAAQ,CAACY,KAAK,GAAGE,QAAQ,CAACE,IAAI,CAACA,IAAI;QACrC,CAAC,MAAM;UACLE,KAAK,CAACJ,QAAQ,CAACE,IAAI,CAACG,OAAO,IAAI,UAAU,CAAC;QAC5C;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;QACjCF,KAAK,CAAC,YAAY,CAAC;MACrB;IACF,CAAC;;IAED;IACA,MAAMI,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAM;UAAEnB,OAAO;UAAEC;QAAS,CAAC,GAAGF,UAAU,CAACU,KAAK;QAC9C,MAAM;UAAEL,OAAO;UAAEC,eAAe;UAAEC;QAAc,CAAC,GAAGH,OAAO,CAACM,KAAK;QACjE,MAAME,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAC9B,mDAAmDZ,OAAO,IAAIC,QAAQ,EAAE,EACxE;UACEmB,MAAM,EAAE;YAAEhB,OAAO;YAAEC,eAAe;YAAEC;UAAc;QACpD,CACF,CAAC;QACD,IAAIK,QAAQ,CAACE,IAAI,CAACC,IAAI,KAAK,GAAG,EAAE;UAC9BhB,QAAQ,CAACW,KAAK,GAAGE,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACQ,IAAI;UACxCtB,UAAU,CAACU,KAAK,CAACP,KAAK,GAAGS,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACX,KAAK;QACnD,CAAC,MAAM;UACLa,KAAK,CAACJ,QAAQ,CAACE,IAAI,CAACG,OAAO,IAAI,UAAU,CAAC;QAC5C;MACF,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;QACjCF,KAAK,CAAC,YAAY,CAAC;MACrB;IACF,CAAC;;IAED;IACA,MAAMO,UAAU,GAAIC,OAAO,IAAK;MAC9BxB,UAAU,CAACU,KAAK,CAACT,OAAO,GAAGuB,OAAO;MAClCJ,aAAa,CAAC,CAAC;IACjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}